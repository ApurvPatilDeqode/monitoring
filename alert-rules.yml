groups:
  - name: example
    rules:
      - alert: InstanceDown
        expr: up == 0
        for: 5m
        labels:
          severity: page
        annotations:
          summary: "Instance {{ $labels.instance }} down"
          description: "{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes."

      - alert: Host out of memory
        description: Node memory is filling up (< 10% left)
        expr: "node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100 < 10"
        severity: warning
        for: 2m

      - alert: Host disk will fill in 24 hours
        description: Filesystem is predicted to run out of space within the next 24 hours at current write rate
        expr: '(node_filesystem_avail_bytes * 100) / node_filesystem_size_bytes < 10 and ON (instance, device, mountpoint) predict_linear(node_filesystem_avail_bytes{fstype!~"tmpfs"}[1h], 24 * 3600) < 0 and ON (instance, device, mountpoint) node_filesystem_readonly == 0'
        severity: warning
        comments: |
          Please add ignored mountpoints in node_exporter parameters like
          "--collector.filesystem.ignored-mount-points=^/(sys|proc|dev|run)($|/)".
          Same rule using "node_filesystem_free_bytes" will fire when disk fills for non-root users.
        for: 2m

      - alert: Host high CPU load
        description: CPU load is > 80%
        expr: '100 - (avg by(instance) (rate(node_cpu_seconds_total{mode="idle"}[2m])) * 100) > 80'
        severity: warning

      - alert: Host unusual network throughput in
        description: Host network interfaces are probably receiving too much data (> 100 MB/s)
        expr: "sum by (instance) (rate(node_network_receive_bytes_total[2m])) / 1024 / 1024 > 100"
        severity: warning
        for: 5m

      - alert: Host unusual network throughput out
        description: Host network interfaces are probably sending too much data (> 100 MB/s)
        expr: "sum by (instance) (rate(node_network_transmit_bytes_total[2m])) / 1024 / 1024 > 100"
        severity: warning
        for: 5m

      - alert: Host unusual disk read rate
        description: Disk is probably reading too much data (> 50 MB/s)
        expr: "sum by (instance) (rate(node_disk_read_bytes_total[2m])) / 1024 / 1024 > 50"
        severity: warning
        for: 5m

      - alert: Host unusual disk write rate
        description: Disk is probably writing too much data (> 50 MB/s)
        expr: "sum by (instance) (rate(node_disk_written_bytes_total[2m])) / 1024 / 1024 > 50"
        severity: warning
        for: 2m
